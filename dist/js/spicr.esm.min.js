// Spicr v1.0.9 | thednp Â© 2021 | MIT-License
const t=/iPhone|iPad|iPod|Android/i,e=navigator.userAgentData?navigator.userAgentData.brands.some(e=>t.test(e.brand)):t.test(navigator.userAgent),n="ontouchstart"in window||navigator.msMaxTouchPoints||!1,a="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"];var s=!!(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get:()=>(t=!0,t)});document.addEventListener("DOMContentLoaded",(function t(){document.removeEventListener("DOMContentLoaded",t,e)}),e)}catch(t){throw Error("Passive events are not supported")}return t})()&&{passive:!0};function r(t){return"true"===t||"false"!==t&&(Number.isNaN(+t)?""===t||"null"===t?null:t:+t)}var o={};function i(t,e,n){const a=e.trim().split(/[,|;]/),s={};return a.forEach(e=>{const a=e.split(/[:|=]/),r=a[0],o=a[1],i=/y/i.test(r)||/v/i.test(o)?"offsetHeight":"offsetWidth";n&&/%/.test(o)&&!/z/i.test(r)?s[r]=o:s[r]=/%/.test(o)?parseFloat(o)*t[i]/100:parseFloat(o)}),s}const c={delay:250,duration:500,easing:"easingCubicOut",interval:5e3,touch:!0,pause:"hover"};function l(t){const e=function(t){const e={};return["translate","rotate","scale","transform-origin","opacity","duration","delay","easing"].forEach(n=>{e["transform-origin"===n?"origin":n]=t.getAttribute("data-"+n)}),e}(t),{translate:n,rotate:a,origin:s,opacity:r,easing:o}=e;let{scale:l,duration:u,delay:d}=e;return l=parseFloat(l),u=+u,d=+d,{translate:n?i(t,n):"",rotate:a?i(t,a):"",origin:s?i(t,s,1):"",scale:Number.isNaN(l)?"":l,opacity:"false"!==r?1:0,duration:Number.isNaN(u)?c.duration:u,delay:Number.isNaN(d)?0:d,easing:o||c.easing}}function u(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function d(t,e,n){const a=t[e]||t[0],s=u(a),r=a.classList.contains("active"),i=t[n],c=i&&i.getElementsByClassName("item-bg")[0],d=c?l(c):0;return d?(Object.keys(d).forEach(t=>{/translate|rotate/.test(t)&&d[t]instanceof Object&&Object.keys(d[t]).forEach(e=>{d[t][e]=-d[t][e]})}),s.map(t=>o.layer(t,0,d))):s.map(t=>o.layer(t,r?0:1))}function f(t,i){const l=function(t,e){const n=e&&e instanceof Element?e:document;return t instanceof Element?t:n.querySelector(t)}(t),u=function(t,e,n,a){const s={},o={},i={...t.dataset};return Object.keys(i).forEach(t=>{const e=t.includes(a)?t.replace(a,"").replace(/[A-Z]/,t=>t.toLowerCase()):t;o[e]=r(i[t])}),Object.keys(n).forEach(t=>{n[t]=r(n[t])}),Object.keys(e).forEach(t=>{s[t]=t in n?n[t]:t in o?o[t]:e[t]}),s}(l,c,i||{}),f=this;f.tweens=[];let m=f.tweens,y={},h=a;n&&e&&(h=["touchstart","touchend"]);const g=u.pause,p=u.touch,v=u.interval,x=l.getElementsByClassName("item"),E=l.querySelectorAll("[data-slide]"),T=E.length&&E[0],L=E.length&&E[1],z=l.getElementsByClassName("spicr-pages")[0],b=z&&z.querySelectorAll("[data-slide-to]");let N=null,O=null,A=0,C=0;const X=l.classList.contains("spicr-slider"),w=l.classList.contains("spicr-carousel");function S(){l.classList.contains("paused")||(l.classList.add("paused"),C||(clearInterval(N),N=null))}function $(){l.classList.contains("paused")&&(l.classList.remove("paused"),C||(clearInterval(N),N=null,f.cycle()))}function I(t){if(t.preventDefault(),C)return;const e=t.target,n=e&&e.getAttribute("data-slide-to");e&&!e.classList.contains("active")&&n&&(A=parseInt(n,10),f.slideTo(A))}function j(t){if(t.preventDefault(),C)return;this===L||L.contains(this)?A+=1:(this===T||T.contains(this))&&(A-=1),f.slideTo(A)}function k(t){y.isTouch||(y.startX=t.changedTouches[0].pageX,l.contains(t.target)&&(y.isTouch=!0,B(1)))}function D(t){y.isTouch&&(y.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1&&t.preventDefault())}function _(t){if(y.isTouch&&!C&&(y.endX=y.currentX||t.changedTouches[0].pageX,y.isTouch)){if((!l.contains(t.target)||!l.contains(t.relatedTarget))&&Math.abs(y.startX-y.endX)<75)return;y.currentX<y.startX?A+=1:y.currentX>y.startX&&(A-=1),y.isTouch=!1,f.slideTo(A),B()}}function B(t){const e=t?"addEventListener":"removeEventListener";l[e]("touchmove",D,s),l[e]("touchend",_,s)}function M(t){const e=t?"addEventListener":"removeEventListener";"hover"===g&&v&&(l[e](h[0],S),l[e](h[1],$)),L&&L[e]("click",j),T&&T[e]("click",j),p&&x.length>1&&l[e]("touchstart",k,s),z&&z[e]("click",I)}function P(t){Array.from(b).map(t=>t.classList.remove("active")),t&&t.classList.add("active")}function q(t,e){A=e,x[e].classList.add("next"),C=!0,w&&t>-1&&x[t].offsetHeight!==x[e].offsetHeight&&(l.style.height=getComputedStyle(x[t]).height)}function F(t,e){x[e].classList.add("active"),x[e].classList.remove("next"),x[t]&&x[t].classList.remove("active"),setTimeout(()=>{w&&(l.style.height=""),o.reset(l),C=!1,m=[],v&&!l.classList.contains("paused")&&f.cycle()},0)}this.getActiveIndex=()=>{const t=l.getElementsByClassName("item active")[0];return Array.from(x).indexOf(t)},this.cycle=()=>{clearInterval(N),N=setTimeout(()=>{A+=1,f.slideTo(A)},v)},this.slideTo=t=>{let e=t;const n=this.getActiveIndex();n===e||C||(clearInterval(N),N=setTimeout(()=>{if(n<e||0===n&&e===x.length-1?O=1:(n>e||n===x.length-1&&0===e)&&(O=0),e<0?e=x.length-1:e>=x.length&&(e=0),X){q(n,e);const t=-1!==n?d(x,n,e):d(x,n),a=-1!==n&&d(x,e);-1===n?t.length&&(m=m.concat(t)):(t.length&&(m=m.concat(t)),a.length&&(m=m.concat(a))),m.length?(m.reduce((t,e)=>t._duration+t._delay>e._duration+e._delay?t:e)._onComplete=()=>F(n,e),m.forEach(t=>t.start())):F(n,e),b&&P(b[e])}else if(w){q(n,e);const{delay:t,duration:a,easing:s}=c,r=x[n],i=x[e];m=o.carousel(l,x,n,e,O),m.length?(r&&r.offsetHeight!==i.offsetHeight&&m.push(o.fromTo(l,{height:parseFloat(getComputedStyle(r).height)},{height:parseFloat(getComputedStyle(i).height)},{easing:s,duration:a,delay:Math.max(...m.map(t=>t._delay+t._duration))||t})),m[m.length-1]._onComplete=()=>F(n,e),m.forEach(t=>t.start())):F(n,e),b&&P(b[e])}},1))},this.dispose=()=>{C&&m.forEach(t=>t.stop()),o.reset(l),y={},M(),clearInterval(N),delete l.Spicr},l.Spicr&&l.Spicr.dispose(),M(1),l.Spicr=f,l.getElementsByClassName("item active").length?v&&f.cycle():f.slideTo(0)}if(void 0===window.KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function m(t){const e=t instanceof Element?t:document;Array.from(e.querySelectorAll('[data-function="spicr"]')).forEach(t=>new f(t))}o.fromTo=window.KUTE.fromTo,o.carousel=function(t,e,n,a,s){const r=[],d=l(t),f={},m={},y={},h={},g=e[n],p=g&&u(g),v=u(e[a]),{translate:x}=d,{rotate:E}=d,{scale:T}=d,L=t.getAttribute("data-transform-origin"),{opacity:z}=d,{easing:b}=d;let N=d.duration||c.duration,O=d.delay||+N/2;if(z&&(f.opacity=1,m.opacity=0,y.opacity=0,h.opacity=1),(T||x||E)&&(f.transform={},m.transform={},y.transform={},h.transform={}),T&&(f.transform.scale=1,m.transform.scale=T,y.transform.scale=T,h.transform.scale=1),x){f.transform.translate3d=[0,0,0];let t=0,e=0,n=0;"x"in x&&(t=s?-x.x:x.x),"y"in x&&(e=s?-x.y:x.y),"Z"in x&&(n=s?-x.z:x.z),m.transform.translate3d=[t,e,n];let a=0,r=0,o=0;"x"in x&&(a=s?x.x:-x.x),"y"in x&&(r=s?x.y:-x.y),"Z"in x&&(o=s?x.z:-x.z),y.transform.translate3d=[a,r,o],h.transform.translate3d=[0,0,0]}if(E){f.transform.rotate3d=[0,0,0];let t=0,e=0,n=0;"x"in E&&(t=s?-E.x:E.x),"y"in E&&(e=s?-E.y:E.y),"Z"in E&&(n=s?-E.z:E.z),m.transform.rotate3d=[t,e,n];let a=0,r=0,o=0;"x"in E&&(a=s?E.x:-E.x),"y"in E&&(r=s?E.y:-E.y),"Z"in E&&(o=s?E.z:-E.z),y.transform.rotate3d=[a,r,o],h.transform.rotate3d=[0,0,0]}s||(p&&p.reverse(),v.reverse()),z||E||x||T||(N=50,O=0);const A={easing:b,duration:N},C=A;return p&&p.forEach((t,e)=>{if(A.delay=c.delay*e,r.push(o.fromTo(t,f,m,A)),L){const e=i(t,L);let n="50%",a="50%";const s="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(a=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${a}${s}`}}),v.forEach((t,e)=>{if(C.delay=(O+50)*e,r.push(o.fromTo(t,y,h,C)),L){const e=i(t,L);let n="50%",a="50%";const s="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(a=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${a}${s}`}}),r},o.layer=function(t,e,n){const a=n||l(t),s=t.classList.contains("item-bg"),r={},i={},{translate:u}=a,{rotate:d}=a,{scale:f}=a,{origin:m}=a;let{opacity:y}=a,{duration:h}=a,{easing:g}=a,p=a.delay||(s?0:c.delay);if(/InOut/.test(g)||n||(g=e?g.replace("In","Out"):g.replace("Out","In")),e||(h=s?h:1.5*h),p=e?p:0,y=!e&&s&&n?0:y,y&&(r.opacity=e?0:1,i.opacity=e?1:0),(f||u||d)&&(r.transform={},i.transform={},m)){let e="50%",n="50%";const a="z"in m?` ${m.z}px`:"";"x"in m&&(e=/%/.test(m.x)?m.x:m.x+"px"),"y"in m&&(n=/%/.test(m.y)?m.y:m.y+"px"),t.style.transformOrigin=`${e} ${n}${a}`}if(f&&(r.transform.scale=e?f:1,i.transform.scale=e?1:f),u){const t=e&&u.x?u.x:0,n=u.x&&!e?u.x:0,a=e&&u.y?u.y:0,s=u.y&&!e?u.y:0,o=e&&u.z?u.z:0,c=u.z&&!e?u.z:0;r.transform.translate3d=[t,a,o],i.transform.translate3d=[n,s,c]}if(d){const t=e&&d.x?d.x:0,n=!e&&d.x?d.x:0,a=e&&d.y?d.y:0,s=!e&&d.y?d.y:0,o=e&&d.z?d.z:0,c=!e&&d.z?d.z:0;r.transform.rotate3d=[t,a,o],i.transform.rotate3d=[n,s,c]}return y||d||u||f||(h=50,p=0),o.fromTo(t,r,i,{easing:g,duration:h,delay:p})},o.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).forEach(t=>{t.style.opacity="",t.style.transform="",t.style.transformOrigin=""})},f.initComponent=m,document.body?m():document.addEventListener("DOMContentLoaded",m,{once:!0});f.Version="1.0.9";export default f;
