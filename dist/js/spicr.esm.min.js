// Spicr v1.0.10 | thednp Â© 2023 | MIT-License
function t(t,e){const n=e&&("object"==typeof(s=e)&&s instanceof HTMLElement)?e:document;var s;return"object"==typeof t?t:n.querySelector(t)}const e=/iPhone|iPad|iPod|Android/i;let n=!1;n=navigator.userAgentData?navigator.userAgentData.brands.some(t=>e.test(t.brand)):e.test(navigator.userAgent);const s=n,a="ontouchstart"in window||"msMaxTouchPoints"in navigator,o="onmouseleave"in document?["mouseenter","mouseleave"]:["mouseover","mouseout"];const r=!!(()=>{let t=!1;try{const o=Object.defineProperty({},"passive",{get:()=>(t=!0,t)});e=document,s=()=>{},function(t,e,n,s){const a=s||!1;t.addEventListener(e,n,a)}(e,n="DOMContentLoaded",(function t(o){o.target===e&&(s.apply(e,[o]),function(t,e,n,s){const a=s||!1;t.removeEventListener(e,n,a)}(e,n,t,a))}),a=o)}catch(t){throw Error("Passive events are not supported")}var e,n,s,a;return t})()&&{passive:!0};function i(t){return"true"===t||"false"!==t&&(Number.isNaN(+t)?""===t||"null"===t?null:t:+t)}const l=t=>Object.keys(t);const c={};function d(t,e,n){const s=e.trim().split(/[,|;]/),a={};return s.forEach(e=>{const s=e.split(/[:|=]/),o=s[0],r=s[1],i=/y/i.test(o)||/v/i.test(r)?"offsetHeight":"offsetWidth";n&&/%/.test(r)&&!/z/i.test(o)?a[o]=r:a[o]=/%/.test(r)?parseFloat(r)*t[i]/100:parseFloat(r)}),a}const u={delay:250,duration:500,easing:"easingCubicOut",interval:5e3,touch:!0,pause:"hover",slides:{itemsPerPage:3,totalRealItems:5,activeAlign:"center",gap:8,axis:"x",autoloop:!0}};function f(t){const e=function(t){const e={};return["translate","rotate","scale","transform-origin","opacity","duration","delay","easing"].forEach(n=>{e["transform-origin"===n?"origin":n]=t.getAttribute("data-"+n)}),e}(t),{translate:n,rotate:s,origin:a,opacity:o,easing:r}=e;let{scale:i,duration:l,delay:c}=e;return i=parseFloat(i),l=+l,c=+c,{translate:n?d(t,n):"",rotate:s?d(t,s):"",origin:a?d(t,a,1):"",scale:Number.isNaN(i)?"":i,opacity:"false"!==o?1:0,duration:Number.isNaN(l)?u.duration:l,delay:Number.isNaN(c)?0:c,easing:r||u.easing}}function m(t){return Array.from(t.getElementsByClassName("spicr-layer"))}function g(t,e,n){const s=t[e]||t[0],a=m(s),o=s.classList.contains("active"),r=t[n],i=r&&r.getElementsByClassName("item-bg")[0],l=i?f(i):0;return l?(Object.keys(l).forEach(t=>{/translate|rotate/.test(t)&&l[t]instanceof Object&&Object.keys(l[t]).forEach(e=>{l[t][e]=-l[t][e]})}),a.map(t=>c.layer(t,0,l))):a.map(t=>c.layer(t,o?0:1))}function y(e,n){const d=t(e,f);var f;const m=function(t,e,n,s){const a={...t.dataset},o={},r={};return l(a).forEach(t=>{const e=s&&t.includes(s)?t.replace(s,"").replace(/[A-Z]/,t=>t.toLowerCase()):t;r[e]=i(a[t])}),l(n).forEach(t=>{n[t]=i(n[t])}),l(e).forEach(t=>{o[t]=t in n?n[t]:t in r?r[t]:e[t]}),o}(d,u,n||{}),y=this;y.tweens=[];let h=y.tweens,p={},x=o;a&&s&&(x=["touchstart","touchend"]);const v=m.pause,E=m.touch,{gap:T,axis:L,autoloop:N}=m.slides,z=m.interval,b=d.getElementsByClassName("item"),A=d.querySelectorAll("[data-slide]"),I=A.length&&A[0],C=A.length&&A[1],O=d.getElementsByClassName("spicr-pages")[0],P=O&&O.querySelectorAll("[data-slide-to]");let w=null,X=null,$=0,S=0;const _=d.classList.contains("spicr-slides"),j=!_&&d.classList.contains("spicr-slider"),F=d.classList.contains("spicr-carousel");function B(){d.classList.contains("paused")||(d.classList.add("paused"),S||(clearInterval(w),w=null))}function D(){d.classList.contains("paused")&&(d.classList.remove("paused"),S||(clearInterval(w),w=null,y.cycle()))}function M(t){if(t.preventDefault(),S)return;const e=t.target,n=e&&e.getAttribute("data-slide-to");e&&!e.classList.contains("active")&&n&&($=parseInt(n,10),y.slideTo($))}function Z(t){if(t.preventDefault(),S)return;this===C||C.contains(this)?$+=1:(this===I||I.contains(this))&&($-=1),y.slideTo($)}function k(t){p.isTouch||(p.startX=t.changedTouches[0].pageX,d.contains(t.target)&&(p.isTouch=!0,q(1)))}function H(t){p.isTouch&&(p.currentX=t.changedTouches[0].pageX,"touchmove"===t.type&&t.changedTouches.length>1&&t.preventDefault())}function R(t){if(p.isTouch&&!S&&(p.endX=p.currentX||t.changedTouches[0].pageX,p.isTouch)){if((!d.contains(t.target)||!d.contains(t.relatedTarget))&&Math.abs(p.startX-p.endX)<75)return;p.currentX<p.startX?$+=1:p.currentX>p.startX&&($-=1),p.isTouch=!1,y.slideTo($),q()}}function q(t){const e=t?"addEventListener":"removeEventListener";d[e]("touchmove",H,r),d[e]("touchend",R,r)}function U(t){const e=t?"addEventListener":"removeEventListener";"hover"===v&&z&&(d[e](x[0],B),d[e](x[1],D)),C&&C[e]("click",Z),I&&I[e]("click",Z),E&&b.length>1&&d[e]("touchstart",k,r),O&&O[e]("click",M)}function K(t){Array.from(P).map(t=>t.classList.remove("active")),t&&t.classList.add("active")}function Y(t,e){$=e,b[e].classList.add("next"),S=!0,F&&t>-1&&b[t].offsetHeight!==b[e].offsetHeight&&(d.style.height=getComputedStyle(b[t]).height)}function V(t,e){b[e].classList.add("active"),b[e].classList.remove("next"),b[t]&&b[t].classList.remove("active"),setTimeout(()=>{if(F&&(d.style.height=""),_){if(console.log("options.slides",m.slides),N){const t=W();console.log("nextItem (active 1)",e),console.log("ttlItemsFrActive",t);const n=e-t;console.log("indexOfFirstItemOnPg",n);const s=m.slides.itemsPerPage-1;console.log("maxIdxLClones",s);const a=m.slides.itemsPerPage+m.slides.totalRealItems+1-1;if(console.log("minIdxRClones",a),s>=n||n>=a){console.log("chkIsInCloneRange",n,s>=n>=a);const t=n>=a;console.log("isOnRight",t);let o=m.slides.totalRealItems;o=t?-o:o,console.log("moveByTtlItems",o);const r=e+o;$=r,console.log("realNextItem",r);const i=n+o;console.log("realFirstItemPg",i);let l=0;l="x"===L?b[0].offsetWidth:b[0].offsetHeight,console.log("itemLength",l);const c=-1*(i*l+T*i);console.log("pos",T,c),Array.from(b).forEach((t,e)=>{t.style.transform=`translate${L.toUpperCase()}(${c}px)`}),b[e].classList.remove("active"),b[r].classList.add("active"),e=r}}}else c.reset(d);S=!1,h=[];const t=new CustomEvent("afterTween",{detail:{newActive:e}});d.dispatchEvent(t),z&&!d.classList.contains("paused")&&y.cycle()},0)}function W(){let t=0;return"center"===m.slides.activeAlign?t=(m.slides.itemsPerPage-1)/2:"right"===m.slides.activeAlign&&(t=m.slides.itemsPerPage),t}_&&($=(N?m.slides.itemsPerPage:0)+W()+1-1,console.log("init index",$)),this.getActiveIndex=()=>{const t=d.getElementsByClassName("item active")[0];return Array.from(b).indexOf(t)},this.cycle=()=>{clearInterval(w),w=setTimeout(()=>{$+=1,y.slideTo($)},z)},this.slideTo=t=>{console.log("slideTonextIdx",t);let e=t;const n=this.getActiveIndex();console.log(n,e,S),n===e||S||(clearInterval(w),w=setTimeout(()=>{if(n<e||0===n&&e===b.length-1?X=1:(n>e||n===b.length-1&&0===e)&&(X=0),e<0?e=b.length-1:e>=b.length&&(e=0),console.log(" find the right next index",n,e,S),j){Y(n,e);const t=-1!==n?g(b,n,e):g(b,n),s=-1!==n&&g(b,e);-1===n?t.length&&(h=h.concat(t)):(t.length&&(h=h.concat(t)),s.length&&(h=h.concat(s))),h.length?(h.reduce((t,e)=>t._duration+t._delay>e._duration+e._delay?t:e)._onComplete=()=>V(n,e),h.forEach(t=>t.start())):V(n,e),P&&K(P[e])}else if(_)Y(n,e),h=c.slides(d,b,n,e,X,L,T),h.length?(h.reduce((t,e)=>t._duration+t._delay>e._duration+e._delay?t:e)._onComplete=()=>V(n,e),h.forEach(t=>t.start())):V(n,e);else if(F){Y(n,e);const{delay:t,duration:s,easing:a}=u,o=b[n],r=b[e];h=c.carousel(d,b,n,e,X),h.length?(o&&o.offsetHeight!==r.offsetHeight&&h.push(c.fromTo(d,{height:parseFloat(getComputedStyle(o).height)},{height:parseFloat(getComputedStyle(r).height)},{easing:a,duration:s,delay:Math.max(...h.map(t=>t._delay+t._duration))||t})),h[h.length-1]._onComplete=()=>V(n,e),h.forEach(t=>t.start())):V(n,e),P&&K(P[e])}},1))},this.dispose=()=>{S&&h.forEach(t=>t.stop()),c.reset(d),p={},U(),clearInterval(w),delete d.Spicr},d.Spicr&&d.Spicr.dispose(),U(1),d.Spicr=y,d.getElementsByClassName("item active").length?z&&y.cycle():y.slideTo(0)}if(void 0===window.KUTE)throw Error("Spicr requires KUTE.js ^2.0.10");function h(t){const e=t instanceof Element?t:document;Array.from(e.querySelectorAll('[data-function="spicr"]')).forEach(t=>new y(t))}c.fromTo=window.KUTE.fromTo,c.carousel=function(t,e,n,s,a){const o=[],r=f(t),i={},l={},g={},y={},h=e[n],p=h&&m(h),x=m(e[s]),{translate:v}=r,{rotate:E}=r,{scale:T}=r,L=t.getAttribute("data-transform-origin"),{opacity:N}=r,{easing:z}=r;let b=r.duration||u.duration,A=r.delay||+b/2;if(N&&(i.opacity=1,l.opacity=0,g.opacity=0,y.opacity=1),(T||v||E)&&(i.transform={},l.transform={},g.transform={},y.transform={}),T&&(i.transform.scale=1,l.transform.scale=T,g.transform.scale=T,y.transform.scale=1),v){i.transform.translate3d=[0,0,0];let t=0,e=0,n=0;"x"in v&&(t=a?-v.x:v.x),"y"in v&&(e=a?-v.y:v.y),"Z"in v&&(n=a?-v.z:v.z),l.transform.translate3d=[t,e,n];let s=0,o=0,r=0;"x"in v&&(s=a?v.x:-v.x),"y"in v&&(o=a?v.y:-v.y),"Z"in v&&(r=a?v.z:-v.z),g.transform.translate3d=[s,o,r],y.transform.translate3d=[0,0,0]}if(E){i.transform.rotate3d=[0,0,0];let t=0,e=0,n=0;"x"in E&&(t=a?-E.x:E.x),"y"in E&&(e=a?-E.y:E.y),"Z"in E&&(n=a?-E.z:E.z),l.transform.rotate3d=[t,e,n];let s=0,o=0,r=0;"x"in E&&(s=a?E.x:-E.x),"y"in E&&(o=a?E.y:-E.y),"Z"in E&&(r=a?E.z:-E.z),g.transform.rotate3d=[s,o,r],y.transform.rotate3d=[0,0,0]}a||(p&&p.reverse(),x.reverse()),N||E||v||T||(b=50,A=0);const I={easing:z,duration:b},C=I;return p&&p.forEach((t,e)=>{if(I.delay=u.delay*e,o.push(c.fromTo(t,i,l,I)),L){const e=d(t,L);let n="50%",s="50%";const a="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(s=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${s}${a}`}}),x.forEach((t,e)=>{if(C.delay=(A+50)*e,o.push(c.fromTo(t,g,y,C)),L){const e=d(t,L);let n="50%",s="50%";const a="z"in e?` ${e.z}px`:"";"x"in e&&(n=/%/.test(e.x)?e.x:e.x+"px"),"y"in e&&(s=/%/.test(e.y)?e.y:e.y+"px"),t.style.transformOrigin=`${n} ${s}${a}`}}),o},c.layer=function(t,e,n){const s=n||f(t),a=t.classList.contains("item-bg"),o={},r={},{translate:i}=s,{rotate:l}=s,{scale:d}=s,{origin:m}=s;let{opacity:g}=s,{duration:y}=s,{easing:h}=s,p=s.delay||(a?0:u.delay);if(/InOut/.test(h)||n||(h=e?h.replace("In","Out"):h.replace("Out","In")),e||(y=a?y:1.5*y),p=e?p:0,g=!e&&a&&n?0:g,g&&(o.opacity=e?0:1,r.opacity=e?1:0),(d||i||l)&&(o.transform={},r.transform={},m)){let e="50%",n="50%";const s="z"in m?` ${m.z}px`:"";"x"in m&&(e=/%/.test(m.x)?m.x:m.x+"px"),"y"in m&&(n=/%/.test(m.y)?m.y:m.y+"px"),t.style.transformOrigin=`${e} ${n}${s}`}if(d&&(o.transform.scale=e?d:1,r.transform.scale=e?1:d),i){const t=e&&i.x?i.x:0,n=i.x&&!e?i.x:0,s=e&&i.y?i.y:0,a=i.y&&!e?i.y:0,l=e&&i.z?i.z:0,c=i.z&&!e?i.z:0;o.transform.translate3d=[t,s,l],r.transform.translate3d=[n,a,c]}if(l){const t=e&&l.x?l.x:0,n=!e&&l.x?l.x:0,s=e&&l.y?l.y:0,a=!e&&l.y?l.y:0,i=e&&l.z?l.z:0,c=!e&&l.z?l.z:0;o.transform.rotate3d=[t,s,i],r.transform.rotate3d=[n,a,c]}return g||l||i||d||(y=50,p=0),c.fromTo(t,o,r,{easing:h,duration:y,delay:p})},c.reset=function(t){Array.from(t.getElementsByClassName("spicr-layer")).forEach(t=>{t.style.opacity="",t.style.transform="",t.style.transformOrigin=""})},c.slides=function(t,e,n,s,a,o,r){const i=[],l=function(t,e){const n=function(t){const e={};return["translate","rotate","scale","transform-origin","opacity","duration","delay","easing","axis"].forEach(n=>{e["transform-origin"===n?"origin":n]=t.getAttribute("data-"+n)}),e}(t),{translate:s,rotate:a,origin:o,opacity:r,easing:i,axis:l}=n;let{scale:c,duration:f,delay:m}=n;return c=parseFloat(c),f=+f,m=+m,{axis:l,translate:s?d(e,s):"",rotate:a?d(t,a):"",origin:o?d(t,o,1):"",scale:Number.isNaN(c)?"":c,opacity:"false"!==r?1:0,duration:Number.isNaN(f)?u.duration:f,delay:Number.isNaN(m)?0:m,easing:i||u.easing}}(t,e[n]),f=e[n],{translate:m}=l,{easing:g}=(t.getAttribute("data-transform-origin"),l),y=l.duration||u.duration,h={},p={},x=getComputedStyle(f).getPropertyValue("transform"),v=new DOMMatrixReadOnly(x),E={X:v.m41,Y:v.m42,Z:v.m43};if(console.log("activeTranslate",E),m){console.log("elem translate",m),h.transform={},p.transform={},h.transform.translate3d=[E.X,E.Y,E.Z];let t=0,n=0,s=0;"x"in m&&("x"===o&&(m.x+=r),t=a?-m.x:m.x),"y"in m&&("y"===o&&(m.y+=r),n=a?-m.y:m.y),"z"in m&&("z"===o&&(m.z+=r),s=a?-m.z:m.z),console.log("elem translate after direction",m);const l=t+E.X,d=n+E.Y,u=s+E.Z;p.transform.translate3d=[l,d,u],console.log("fromTo",h.transform,p.transform),Array.from(e).forEach((t,e)=>{i.push(c.fromTo(t,h,p,{easing:g,duration:y}))})}return i},y.initComponent=h,document.body?h():document.addEventListener("DOMContentLoaded",h,{once:!0});Object.assign(y,{Version:"1.0.10"});export default y;
